<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Filmstrip</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
    <style type="text/css">
        body {
            background-color: #222;
            margin: 20px;
        }
    </style>
    <script src="http://underscorejs.org/underscore.js"></script>
    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="filmstrip.js"></script>
    <script>
        $(document).ready(function() {

            var model = {src: 'http://opcode.coop/filmstrip/elephants_dream_r1.ogv'};

            var width = 120;
            var height = 600;

            $('#fs').css({
                width: width + 'px',
                height: height + 'px'
            });

            window.fs = new Filmstrip(model, {
                width: width,
                height: height,
                bgColor: '#333',
                drawBackground: true,
                drawHoles: true,
                holesColor: '#222',
                holesDispersion: .7,
                bandsPadding: 20,
                autoOrientation: true,
                strechOnResize: true,
            });

            fs.load();

            fs.on('loaded', function() {
            });

            fs.on('draw:finished', function() {
                this.drawCanvas($('#fs > canvas'));
            });

            fs.on('draw:frame', function(event, args) {
                this.drawFrame($('#fs > canvas'), args);
            });

            $('#fs').resizable({
                resize: _.throttle(function(event, ui) {
                    fs.resize(ui.size.width, ui.size.height);
                }, 200, {leading: false}),
            });

            $('#fs').on('resize', function(event, ui) {
                $('#fs > canvas').css({
                    width: ui.size.width + 'px',
                    height: ui.size.height + 'px'
                });
            });

        });
    </script>
</head>
<body>
   <div id="fs" style="border:solid 1px #111"><canvas></canvas></div>
</body>
</html>
